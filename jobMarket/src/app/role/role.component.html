<h2 style = "text-align: center">{{role.roleName}}</h2>
<h4 style = "text-align: center" [hidden]="primarySkill==undefined">Key Skill: {{primarySkill}}</h4>

<div>
<div class="chart"> 
    <h3>Vacancies For the Last Five Years</h3>
        <div style="display: block"> 
            <canvas baseChart
                [data]="pieChartData"
                [labels]="pieChartLabels"
                [chartType]="pieChartType"> 
            </canvas>
        </div>
    </div>
<br>
<hr>
<br>
<table id="customers">
    <tr>
        <th>This Years Vacancies</th>
        <th>Salary</th>
        <!-- <th>Year</th> -->
        <!-- <th>Skills</th> -->
    </tr>
    <!-- iterate through vacancies and show those from the last year on record -->
    <ng-container *ngFor = "let vac of role.vacancies">
        <tr *ngIf = "vac.uploadYear == 2019">
            <td><button mat-button (click)="openVacancy(vac.vacancyId)">{{vac.title}}</button></td>
            <td>£{{vac.salary}}</td>
            <!-- <td>{{vac.uploadYear}}</td>  -->
            <!-- <td *ngIf="vac.vacancySkills.length>0">{{vac.vacancySkills[0].skill}}</td>
            <td *ngIf="vac.vacancySkills.length>1">{{vac.vacancySkills[1].skill}}</td> -->
        </tr>
    </ng-container>
</table>
</div>

<table id="customers">
    <tr>
        <th>Historical Vacancies</th>
        <th>Current Vacancies</th>
        <th>Last Year's Vacancies</th>
        <th>Mean Salary</th>
        <th>Last Year's Mean Salary</th>
    </tr>
    <tr>
        <td>{{vacCount}}</td>
        <td>{{role.numVacanciesNow}}</td>
        <td>{{role.numVacanciesPrev}}</td>
        <td>£{{role.medSalaryNow}}</td>
        <td>£{{role.medSalaryPrev}}</td>
    </tr>
</table>

<br> 
<hr>
<br>

<div class="chart"> 
    <h3>Mean Salaries Through Time</h3>
    <div style="display: block"> 
        <canvas baseChart 
            [datasets]="lineChartData" 
            [labels]="lineChartLabels" 
            [options]="lineChartOptions" 
            [legend]="lineChartLegend"
            [chartType]="lineChartType"> 
        </canvas>
    </div>
</div>

